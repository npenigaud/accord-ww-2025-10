MODULE YOMCVMNH

!$ACDC methods 


!Module to define the parameters of the KFB
!convection parametrization of MNH.
! Modified by E. Bazile 09.05.2007
!    parameters for KFB in namelist

USE PARKIND1  ,ONLY : JPIM     ,JPRB
USE MODD_NSV            , ONLY : NSV_T
USE MODD_CONVPAR        , ONLY : CONVPAR_T
USE MODD_CST            , ONLY : CST_T
USE MODD_CONVPAREXT     , ONLY : CONVPAREXT
USE MODD_CONVPAR_SHAL   , ONLY : CONVPAR_SHAL

IMPLICIT NONE

SAVE

TYPE TCVMNH
!--------------------------------------------

!LDEEP : Control Key to deep convection scheme
!LSHALLOW : Control key to shallow convection scheme
!LDIAGCONV : Control key to compute diagnostics on convection
!LSETTADJ : logical to set convective adjustment time by user
!LREFRESH_ALL ! refresh or not tendencies at every call
!LDOWN ! take or not convective downdrafts into account 

!OTADJD : user specified time step to call deep convection
!OTADJS : user specified time step to call shallow convection

!NSETENS : use of several calls to deep_conv (0 only one call)
!NIICE : USe of Ice in convection 1 yes 0 no

LOGICAL :: LDEEP, LSHALLOW, LDIAGCONV
LOGICAL :: LSETTADJ, LREFRESH_ALL, LDOWN, LSMOOTH
REAL(KIND=JPRB) :: OTADJD
REAL(KIND=JPRB) :: OTADJS
INTEGER(KIND=JPIM) :: NSETENS, NIICE
REAL(KIND=JPRB) :: XA25
REAL(KIND=JPRB) :: XCRAD
REAL(KIND=JPRB) :: XCDEPTH
REAL(KIND=JPRB) :: XCDEPTH_D
REAL(KIND=JPRB) :: XDTPERT
REAL(KIND=JPRB) :: XENTR
REAL(KIND=JPRB) :: XZLCL
REAL(KIND=JPRB) :: XZPBL
REAL(KIND=JPRB) :: XWTRIG
REAL(KIND=JPRB) :: XNHGAM
REAL(KIND=JPRB) :: XTFRZ1
REAL(KIND=JPRB) :: XTFRZ2 
REAL(KIND=JPRB) :: XSTABT
REAL(KIND=JPRB) :: XSTABC
REAL(KIND=JPRB) :: XAW
REAL(KIND=JPRB) :: XBW
REAL(KIND=JPRB) :: XATPERT
REAL(KIND=JPRB) :: XBTPERT

TYPE(CONVPAREXT)   :: YRCVPEXT
TYPE(CONVPAR_SHAL) :: YRCVP_SHAL
TYPE(CST_T)        :: YRCST_MNH
TYPE(NSV_T)        :: YRNSV
TYPE(CONVPAR_T)    :: YRCONVPAR

CONTAINS
PROCEDURE :: ACDC_COPY => ACDC_COPY_TCVMNH
PROCEDURE :: ACDC_CRC64 => ACDC_CRC64_TCVMNH
PROCEDURE :: ACDC_HOST => ACDC_HOST_TCVMNH
PROCEDURE :: ACDC_LOAD => ACDC_LOAD_TCVMNH
PROCEDURE :: ACDC_SAVE => ACDC_SAVE_TCVMNH
PROCEDURE :: ACDC_SIZE => ACDC_SIZE_TCVMNH
PROCEDURE :: ACDC_WIPE => ACDC_WIPE_TCVMNH
END TYPE TCVMNH

!!TYPE(TCVMNH), POINTER :: YRCVMNH => NULL()

INTERFACE

MODULE SUBROUTINE ACDC_COPY_TCVMNH (SELF, LDCREATED, LDFIELDAPI)

IMPLICIT NONE
CLASS (TCVMNH), INTENT (IN), TARGET :: SELF
LOGICAL, OPTIONAL, INTENT (IN) :: LDCREATED, LDFIELDAPI
END SUBROUTINE

MODULE SUBROUTINE ACDC_CRC64_TCVMNH (SELF, KLUN, CDPATH)
USE FXTRAN_ACDC_CRC64_INTRINSIC_MOD, ONLY : FCRC64 => FXTRAN_ACDC_CRC64
IMPLICIT NONE
CLASS (TCVMNH), TARGET :: SELF
INTEGER, INTENT (IN) :: KLUN
CHARACTER(LEN=*), INTENT (IN) :: CDPATH
END SUBROUTINE

MODULE SUBROUTINE ACDC_HOST_TCVMNH (SELF)

IMPLICIT NONE
CLASS (TCVMNH), TARGET :: SELF
END SUBROUTINE

MODULE SUBROUTINE ACDC_LOAD_TCVMNH (SELF, KLUN)
USE PARKIND1, ONLY : JPRD
IMPLICIT NONE
CLASS (TCVMNH), INTENT (OUT), TARGET :: SELF
INTEGER, INTENT (IN) :: KLUN
END SUBROUTINE

MODULE SUBROUTINE ACDC_SAVE_TCVMNH (SELF, KLUN)

IMPLICIT NONE
CLASS (TCVMNH), INTENT (IN), TARGET :: SELF
INTEGER, INTENT (IN) :: KLUN
END SUBROUTINE

MODULE FUNCTION ACDC_SIZE_TCVMNH (SELF, CDPATH, LDPRINT) RESULT (KSIZE)

IMPLICIT NONE
CLASS (TCVMNH),     INTENT (IN), TARGET :: SELF
CHARACTER(LEN=*), INTENT (IN), OPTIONAL :: CDPATH
LOGICAL,          INTENT (IN), OPTIONAL :: LDPRINT
INTEGER*8 :: KSIZE
END FUNCTION

MODULE SUBROUTINE ACDC_WIPE_TCVMNH (SELF, LDDELETED, LDFIELDAPI)

IMPLICIT NONE
CLASS (TCVMNH), INTENT (IN), TARGET :: SELF
LOGICAL, OPTIONAL, INTENT (IN) :: LDDELETED, LDFIELDAPI
END SUBROUTINE


END INTERFACE

END MODULE YOMCVMNH
